<!DOCTYPE HTML>
<html lang="en">

<head>
<meta charset="utf-8" />
<title></title>

<style type="text/css">

body { font: 0.75em/1.5 sans-serif; }

#bin-controls { text-align: center; margin: 1em 0 2em; }

#bin-container { 
    font: 18px/1.5 sans-serif;
    -webkit-box-shadow: 0 0 1em #ccc;
    -moz-box-shadow: 0 0 1em #ccc;
    box-shadow: 0 0 1em #ccc;
    position: relative; 
    outline: 1px red solid;
    width: 200px; 
    margin: 0 auto;
    height: 395px; 
    border: 1px #e0d0e0 solid; }
    
#bin-target { 
    /*background: url(_assets/_img-ui/layer-n-line.png) -95px -85px no-repeat;*/
    background: #fff;
    width: 183px;
    text-align: right;
    font-size: 0.8em;
    position: absolute; 
    top: 110px;
    left: 0px;
    z-index: 110; }
    
    #bin-target span { 
        position: relative; 
        z-index: 110; 
        display: block; 
        background: #fff; 
        padding-right: 10px; }
    
    #bin-target-line {
        position: absolute; 
        border: .25em #a9d15a solid; 
        border-left: 0;
        height: 90px; /* 33px = 100%, 241px = 0% */ 
        width: 10px; 
        right: -10px; 
        top: 9px;
        z-index: 90;
        margin-bottom: 10px; }
        
    #bin-target-line-head {
        background: url(http://dummyimage.com/20x20/a9d15a/fff) bottom left no-repeat;
        width: 16px;
        height: 16px;
        position: absolute;
        bottom: -9px;
        right: 5px;
    }
    
#bin-frame-layer { 
    position: absolute; 
    z-index: 100; 
    clip: rect( 0px, 200px, 395px, 0px ); }
    
    #bin-frame-layer img { position: relative; left: -55px; }
    
    #bin-status-layer { 
        color: #7ab800; 
        font-weight: bold; 
        position: absolute; 
        top: 220px;
        font-size: 2.2em;
        text-align: center; 
        width: 200px; }
        
#bin-fill-layer { 
    background: #fff; 
    position: absolute; 
    width: 199px; 
    height: 0px; 
    z-index: 90; 
    bottom: 0;
    left: 1px; }
    
</style>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js"></script>

<script type="text/javascript">
$(function() {

    var total = 237,
        totalp = 100,
        initVal = total; // 0 = 0, 30 = ~1%, 35 = ~5%, 45 = ~10%, ..., 235 = ~100
        
    $('#bin-container').bind('loadBin', function(e, param1) {
    
        var newSet = param1,
            newVal = ((total/totalp) * parseInt(newSet)),
            $val = $('#bin-status-layer .val'),
            $fillLayer = $('#bin-fill-layer'),
            i = parseInt($val.text());
            
            if ( parseInt(i) == parseInt(newSet) ) {
                return false;
            }
            
            if (i < newSet) {
                var id = setInterval(function() {
                
                    $val.text((i+1));
                
                    i = i + 1;
                
                    if (i === parseInt(newSet)) {
                        clearInterval(id);
                    }
                    
                    }, (15)
                
                );
            } else {
                var id = setInterval(function() {
                
                    $val.text((i-1));
                
                    i = i - 1;
                
                    if (i === parseInt(newSet)) {
                        clearInterval(id);
                    }
                    
                    }, (15)
                
                );            
            }
    
        $fillLayer.css({
            background: "#00623e"
        }).animate({
            height: [(15+newVal) + "px", "swing"]
        }, 1000, function() {
            
        });
    
    });
        
    $('a[data-binp]').bind('click', function(e, param1) {
    
        var newSet = ($(this).attr('data-binp')) ? $(this).attr('data-binp') : param1;
        
        $('#bin-container').trigger('loadBin', newSet);
        
        e.preventDefault();
        
    });
    
    $('#bin-container').trigger('loadBin', 90);

});
</script>

</head>

<body>

<div id="bin-controls">
<a href="#set-25" data-binp="0" class="set-bin">Set to 0%</a>
<a href="#set-25" data-binp="25" class="set-bin">Set to 25%</a>
<a href="#set-33" data-binp="33" class="set-bin">Set to 33%</a>
<a href="#set-75" data-binp="75" class="set-bin">Set to 75%</a>
<a href="#set-100" data-binp="100" class="set-bin">Set to 100%</a>
</div>

<div class="container">

<div id="bin-container">

    <div id="bin-target">
        <span>XX% blah blah</span>
        <div id="bin-target-line">
            <div id="bin-target-line-head"></div>
        </div>
    </div><!-- #target -->
    
    <div id="bin-frame-layer">
        <img src="_assets/_img-ui/layer-1-bin-bg.png" alt="XX% onload" />
        <div id="bin-status-layer">
            <span class="status"><span class="val">0</span>%</span>
        </div><!-- #status-layer -->
    </div><!-- #bin-layer -->
    
    <div id="bin-fill-layer"></div><!-- #fill-layer -->

</div><!-- #bin-container -->

</div><!-- .container -->

</body>
</html>
